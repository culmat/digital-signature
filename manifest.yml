modules:
  macro:
    - key: digital-signature-confluence-cloud-culmat
      resource: main
      render: native
      resolver:
        function: resolver
      title:
        i18n: app.title
      config:
        resource: macro-config
        viewportSize: max
        render: native
        title:
          i18n: app.title
      adfExport:
        function: adfExportFunction
  confluence:globalSettings:
    - key: digital-signature-admin-settings
      title:
        i18n: app.admin_title
      resource: admin-ui
      render: native
      resolver:
        function: resolver
  trigger:
    - key: page-lifecycle-trigger
      function: pageLifecycleHandler
      events:
        - avi:confluence:trashed:page
        - avi:confluence:deleted:page
  migration:
    - key: app-data-migration-listener
      function: migrationHandler
      events:
        - avi:app-data-uploaded
  function:
    - key: resolver
      handler: index.handler
    - key: adfExportFunction
      handler: adfExport.handler
    - key: pageLifecycleHandler
      handler: pageLifecycleHandler.handler
    - key: migrationHandler
      handler: src/migration/index.handler
      timeoutSeconds: 900
  sql:
    - key: db
      engine: mysql
resources:
  - key: main
    path: src/frontend/index.jsx
  - key: macro-config
    path: src/frontend/config.jsx
  - key: admin-ui
    path: src/frontend/admin.jsx
translations:
  resources:
    - key: en-US
      path: src/i18n/en.json
    - key: de-DE
      path: src/i18n/de.json
    - key: fr-FR
      path: src/i18n/fr.json
    - key: ja-JP
      path: src/i18n/ja.json
  fallback:
    default: en-US
app:
  runtime:
    name: nodejs22.x
    memoryMB: 256
    architecture: arm64
  id: ari:cloud:ecosystem::app/bab5617e-dc42-4ca8-ad38-947c826fe58c
  licensing:
    enabled: true
permissions:
  scopes:
    - read:confluence-user
    - read:confluence-content.all
    - read:confluence-content.summary
    - write:confluence-content
    - storage:app
    - read:user:confluence
    - read:email-address:confluence
